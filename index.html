<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Palpite Premiado - RB Campinas 85,7 FM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: radial-gradient(circle at top, #1d244a 0%, #000000 55%, #000000 100%);
            color: #1d244a;
        }
        .card {
            box-shadow: 0 20px 60px -10px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }
        .score-input::-webkit-outer-spin-button,
        .score-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .score-input {
            -moz-appearance: textfield;
        }
        .gradient-text {
            background: linear-gradient(135deg, #ffffff 0%, #d19563 40%, #ffffff 80%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .trophy-icon {
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>

    <script>
        // ========================================
        // üéØ CONFIGURA√á√ïES DO SORTEIO - EDITE AQUI!
        // ========================================
        const CONFIG = {
            // üí∞ PR√äMIO - Mude o valor do pr√™mio aqui
            premio: "R$ 5.000,00",
            premioDescricao: "em vale-compras + kit exclusivo RB Campinas",

            // ‚öΩ TIMES DA PARTIDA - Mude os nomes dos times aqui
            timeA: "Time da Casa",
            timeB: "Time Visitante",

            // üìÖ DATA DO JOGO (YYYY-MM-DD)
            dataJogo: "2025-12-10",

            // üé≤ DATA DO SORTEIO - Quantos dias ap√≥s hoje ser√° o sorteio?
            diasAteSorteio: 7,

            // üé® CORES DOS TIMES
            corTimeA: "#1d244a",   // Azul RB
            corTimeB: "#d19563",   // Dourado RB

            // üìù REGRAS DO SORTEIO (TEXTO MOSTRADO NA TELA)
            regras: [
                "Entre os participantes que acertarem exatamente o placar do jogo, ser√° realizado um sorteio para definir o ganhador.",
                "Caso ningu√©m acerte o placar, o pr√™mio acumula para o pr√≥ximo jogo.",
                "Apenas um palpite por pessoa, por jogo (nome, telefone ou CPF duplicados n√£o ser√£o considerados).",
                "O resultado ser√° divulgado nas redes sociais oficiais e durante a programa√ß√£o esportiva da R√°dio Bandeirantes Campinas 85,7 FM.",
                "Promo√ß√£o v√°lida apenas para participantes maiores de 18 anos."
            ],

            // üîó GOOGLE FORMS (j√° configurado com seus entry IDs)
            GOOGLE_FORMS_ACTION_URL: "https://docs.google.com/forms/u/0/d/e/1FAIpQLScPD1ZHBLUw7XZlfVz0SaKMepStBAdBR9emrt8IkEbkIDJNIvUw/formResponse",

            GOOGLE_FORMS_MAP: {
                nome_completo:  "entry.1816663972",
                cidade:         "entry.411640816",
                telefone:       "entry.1608985079",
                cpf:            "entry.1328994654",
                placar_time_a:  "entry.123445036",
                placar_time_b:  "entry.305536384"
            }
        };
        // ========================================

        // ID √∫nico do jogo para controle de ‚Äú1 palpite por jogo‚Äù
        const JOGO_ID = `${CONFIG.timeA}_${CONFIG.timeB}_${CONFIG.dataJogo}`;
        const STORAGE_KEY = `palpite_${JOGO_ID}`;

        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('palpiteForm');
            const messageDiv = document.getElementById('message');
            const drawDateDisplay = document.getElementById('drawDateDisplay');
            const premioDisplay = document.getElementById('premioDisplay');
            const premioDescDisplay = document.getElementById('premioDescDisplay');
            const regrasContainer = document.getElementById('regrasContainer');

            // Identidade visual RB
            document.body.style.background = "radial-gradient(circle at top, #1d244a 0%, #000000 55%, #000000 100%)";

            // Aplicar configura√ß√µes na p√°gina
            document.getElementById('display_time_a').textContent = CONFIG.timeA;
            document.getElementById('display_time_b').textContent = CONFIG.timeB;
            premioDisplay.textContent = CONFIG.premio;
            premioDescDisplay.textContent = CONFIG.premioDescricao;

            const placarAInput = document.getElementById('placar_time_a');
            const placarBInput = document.getElementById('placar_time_b');
            placarAInput.style.borderColor = CONFIG.corTimeA;
            placarAInput.style.color = CONFIG.corTimeA;
            placarBInput.style.borderColor = CONFIG.corTimeB;
            placarBInput.style.color = CONFIG.corTimeB;

            // Regras
            CONFIG.regras.forEach(regra => {
                const li = document.createElement('li');
                li.className = 'flex items-start';
                li.innerHTML = `<span class="mr-2 text-green-600 font-bold">‚úì</span><span>${regra}</span>`;
                regrasContainer.appendChild(li);
            });

            // Data sorteio (informativa)
            const drawDate = new Date();
            drawDate.setDate(drawDate.getDate() + CONFIG.diasAteSorteio);
            drawDateDisplay.textContent = drawDate.toLocaleDateString('pt-BR', {
                day: 'numeric', month: 'long', year: 'numeric'
            });

            function showMessage(text, isError = false) {
                messageDiv.textContent = text;
                messageDiv.className = isError 
                    ? 'p-4 rounded-xl bg-red-600 text-white text-sm font-semibold shadow-lg'
                    : 'p-4 rounded-xl bg-emerald-600 text-white text-sm font-semibold shadow-lg';
                messageDiv.classList.remove('hidden');
            }

            async function enviarParaGoogleForms(palpiteData) {
                const formBody = new FormData();

                for (const [campoLocal, entryId] of Object.entries(CONFIG.GOOGLE_FORMS_MAP)) {
                    formBody.append(entryId, palpiteData[campoLocal] ?? "");
                }

                try {
                    await fetch(CONFIG.GOOGLE_FORMS_ACTION_URL, {
                        method: "POST",
                        mode: "no-cors",
                        body: formBody
                    });

                    // Se chegou at√© aqui sem erro de JS, consideramos enviado
                    localStorage.setItem(STORAGE_KEY, JSON.stringify({
                        cpf: palpiteData.cpf.replace(/\D/g, ''),
                        telefone: palpiteData.telefone.replace(/\D/g, ''),
                        nome: palpiteData.nome_completo
                    }));

                    showMessage("üéâ Palpite registrado com sucesso! Boa sorte!", false);
                    form.reset();
                    placarAInput.value = 0;
                    placarBInput.value = 0;
                } catch (e) {
                    console.error(e);
                    showMessage("‚ùå Erro ao enviar seu palpite. Tente novamente em alguns instantes.", true);
                }
            }

            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                messageDiv.classList.add('hidden');

                const formData = new FormData(form);
                const placarA = parseInt(formData.get('placar_time_a') || '0');
                const placarB = parseInt(formData.get('placar_time_b') || '0');

                // Campos obrigat√≥rios
                const requiredFields = ['nome_completo', 'cidade', 'telefone', 'cpf'];
                for (const field of requiredFields) {
                    if (!formData.get(field)) {
                        showMessage(`‚ö†Ô∏è O campo '${field.replace('_', ' ')}' √© obrigat√≥rio.`, true);
                        return;
                    }
                }

                const cpfLimpo = formData.get('cpf').replace(/\D/g, '');
                const telLimpo = formData.get('telefone').replace(/\D/g, '');

                // Valida CPF (11 d√≠gitos) ‚Äì n√£o √© valida√ß√£o de d√≠gito verificador, s√≥ tamanho
                if (cpfLimpo.length !== 11) {
                    showMessage("‚ö†Ô∏è CPF deve ter 11 d√≠gitos num√©ricos.", true);
                    return;
                }

                // Valida telefone (10 ou 11 d√≠gitos)
                if (telLimpo.length < 10 || telLimpo.length > 11) {
                    showMessage("‚ö†Ô∏è Telefone inv√°lido. Use DDD + n√∫mero.", true);
                    return;
                }

                // Verificar se j√° existe palpite para esse jogo neste navegador
                const existing = localStorage.getItem(STORAGE_KEY);
                if (existing) {
                    try {
                        const data = JSON.parse(existing);
                        // Se qualquer um dos 3 bater (nome, tel ou cpf), bloqueia
                        if (
                            data.cpf === cpfLimpo ||
                            data.telefone === telLimpo ||
                            (data.nome || "").trim().toLowerCase() === (formData.get('nome_completo') || "").trim().toLowerCase()
                        ) {
                            showMessage("‚ö†Ô∏è Voc√™ j√° registrou um palpite para este jogo. Aguarde o pr√≥ximo confronto para participar novamente.", true);
                            return;
                        }
                    } catch (_) { /* ignora erro de parse */ }
                }

                const palpiteData = {
                    nome_completo: formData.get('nome_completo'),
                    cidade: formData.get('cidade'),
                    telefone: formData.get('telefone'),
                    cpf: formData.get('cpf'),
                    placar_time_a: placarA,
                    placar_time_b: placarB
                };

                await enviarParaGoogleForms(palpiteData);
            });

            // Placar (0‚Äì99)
            document.querySelectorAll('.score-input').forEach(input => {
                input.addEventListener('input', (e) => {
                    let value = parseInt(e.target.value);
                    if (isNaN(value) || value < 0) {
                        e.target.value = 0;
                    }
                    if (value > 99) {
                        e.target.value = 99;
                    }
                });
            });

            // M√°scara telefone
            document.getElementById('telefone').addEventListener('input', (e) => {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length <= 11) {
                    value = value.replace(/^(\d{2})(\d)/g, '($1) $2');
                    value = value.replace(/(\d)(\d{4})$/, '$1-$2');
                    e.target.value = value;
                }
            });

            // M√°scara CPF
            document.getElementById('cpf').addEventListener('input', (e) => {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length <= 11) {
                    value = value.replace(/(\d{3})(\d)/, '$1.$2');
                    value = value.replace(/(\d{3})(\d)/, '$1.$2');
                    value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
                    e.target.value = value;
                }
            });
        });
    </script>
</head>
<body class="flex items-center justify-center min-h-screen p-4 sm:p-6">

    <div class="w-full max-w-5xl bg-[#ffffffee] card rounded-3xl p-6 sm:p-10 border border-[#1d244a]">

        <!-- Header RB Campinas -->
        <header class="mb-8">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6">
                <div class="flex items-center space-x-4">
                    <img src="https://play-lh.googleusercontent.com/Kdal1GUehZpADlqztmdjjDKlaRWcQksHz_97RM9I5d_PuaK5KDnhusOkQHVOu8IsEak" 
                         alt="RB Campinas" class="w-20 h-20 rounded-xl border-2 border-[#1d244a] object-contain bg-white">
                    <div>
                        <p class="text-xs font-semibold text-[#1d244a] uppercase tracking-widest">R√°dio Bandeirantes Campinas</p>
                        <p class="text-lg font-extrabold text-[#1d244a]">RB Campinas 85,7 FM</p>
                        <p class="text-xs text-gray-600 mt-1">Fechada com voc√™, fechada com a verdade.<br>A primeira r√°dio de Campinas. Desde 23/11/1933.</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <img src="https://m.media-amazon.com/images/I/510aQeFauWL.png" 
                         alt="Bandeirantes" class="w-16 h-16 object-contain bg-white rounded-xl border border-gray-200">
                </div>
            </div>

            <div class="text-center mb-4">
                <div class="trophy-icon text-5xl mb-2">üèÜ</div>
                <h1 class="text-4xl md:text-5xl font-extrabold gradient-text mb-2">Palpite Premiado RB Campinas</h1>
                <p class="text-lg md:text-xl text-gray-700 font-semibold">Acerte o placar e concorra ao pr√™mio da rodada!</p>
            </div>

            <!-- Card do Pr√™mio -->
            <div class="mt-4 p-5 bg-[#1d244a] rounded-2xl text-white shadow-xl flex flex-col md:flex-row items-center md:justify-between gap-4">
                <div>
                    <p class="text-xs font-semibold uppercase tracking-wider mb-1 text-[#d19563]">Pr√™mio da rodada</p>
                    <p class="text-3xl md:text-4xl font-extrabold mb-1" id="premioDisplay">R$ 5.000,00</p>
                    <p class="text-sm font-medium" id="premioDescDisplay">em vale-compras + kit exclusivo RB Campinas</p>
                </div>
                <div class="text-sm text-right">
                    <p class="font-semibold text-[#d19563]">Jogo v√°lido em:</p>
                    <p class="font-bold text-white text-base">Data do jogo: <span class="font-semibold text-[#d19563]">${CONFIG ? CONFIG.dataJogo : ""}</span></p>
                    <p class="mt-2 font-semibold text-white">Sorteio previsto at√©: <span id="drawDateDisplay" class="font-bold text-[#d19563]">--</span></p>
                </div>
            </div>
        </header>

        <form id="palpiteForm" class="space-y-6">

            <!-- Mensagens de Feedback -->
            <div id="message" class="hidden"></div>
            
            <!-- SE√á√ÉO 1: Partida e Placar -->
            <div class="p-8 rounded-2xl bg-gradient-to-br from-[#1d244a0d] via-[#d1956315] to-white border-2 border-[#1d244a20] shadow-inner">
                <h2 class="text-2xl font-bold text-[#1d244a] mb-3 flex items-center justify-center">
                    <span class="text-3xl mr-3">‚öΩ</span> Partida da Promo√ß√£o
                </h2>
                
                <p class="text-center text-gray-600 mb-6 font-medium">Qual ser√° o placar final?</p>

                <!-- Placar Visual -->
                <div class="flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-6 mb-6 bg-white p-6 rounded-2xl shadow-lg">
                    <div class="flex flex-col items-center">
                        <span id="display_time_a" class="text-2xl md:text-3xl font-extrabold text-[#1d244a] mb-3">Time da Casa</span>
                        <input type="number" id="placar_time_a" name="placar_time_a" min="0" max="99" value="0" required
                               class="score-input w-24 h-24 text-5xl text-center font-extrabold border-4 rounded-2xl p-2 focus:ring-4 focus:ring-[#1d244a55] transition duration-150 shadow-md">
                    </div>
                    
                    <span class="text-5xl font-extrabold text-gray-400 mx-4">√ó</span>
                    
                    <div class="flex flex-col items-center">
                        <span id="display_time_b" class="text-2xl md:text-3xl font-extrabold text-[#1d244a] mb-3">Time Visitante</span>
                        <input type="number" id="placar_time_b" name="placar_time_b" min="0" max="99" value="0" required
                               class="score-input w-24 h-24 text-5xl text-center font-extrabold border-4 rounded-2xl p-2 focus:ring-4 focus:ring-[#d1956355] transition duration-150 shadow-md">
                    </div>
                </div>

                <p class="text-center text-xs text-gray-500 italic">Use as setas do teclado ou digite o placar desejado.</p>
            </div>

            <!-- SE√á√ÉO 2: Dados Pessoais -->
            <div class="p-6 rounded-2xl bg-gradient-to-br from-white to-[#1d244a08] border-2 border-[#1d244a20]">
                <h2 class="text-2xl font-bold text-[#1d244a] mb-5 flex items-center">
                    <span class="text-3xl mr-3">üë§</span> Seus Dados
                </h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
                    
                    <div class="sm:col-span-2">
                        <label for="nome_completo" class="block text-sm font-bold text-gray-700 mb-2">Nome Completo</label>
                        <input type="text" id="nome_completo" name="nome_completo" required
                               class="w-full p-4 border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-[#1d244a55] focus:border-[#1d244a] transition duration-150"
                               placeholder="Ex: Jo√£o da Silva">
                    </div>
                    
                    <div>
                        <label for="cidade" class="block text-sm font-bold text-gray-700 mb-2">Cidade</label>
                        <input type="text" id="cidade" name="cidade" required
                               class="w-full p-4 border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-[#1d244a55] focus:border-[#1d244a] transition duration-150"
                               placeholder="Ex: Campinas">
                    </div>

                    <div>
                        <label for="telefone" class="block text-sm font-bold text-gray-700 mb-2">WhatsApp</label>
                        <input type="tel" id="telefone" name="telefone" required maxlength="15"
                               class="w-full p-4 border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-[#1d244a55] focus:border-[#1d244a] transition duration-150" 
                               placeholder="(19) 99999-9999">
                    </div>

                    <div class="sm:col-span-2">
                        <label for="cpf" class="block text-sm font-bold text-gray-700 mb-2">CPF</label>
                        <input type="text" id="cpf" name="cpf" required maxlength="14"
                               class="w-full p-4 border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-[#1d244a55] focus:border-[#1d244a] transition duration-150" 
                               placeholder="000.000.000-00">
                    </div>
                </div>
            </div>

            <!-- Regras -->
            <div class="p-6 rounded-2xl bg-gradient-to-br from-[#1d244a] via-[#1d244a] to-[#000000] border-2 border-[#d19563]">
                <h3 class="text-xl font-bold text-[#d19563] mb-4 flex items-center">
                    <span class="text-2xl mr-2">üìã</span> Regras da Promo√ß√£o
                </h3>
                <ul id="regrasContainer" class="space-y-2 text-gray-100 text-sm font-medium">
                    <!-- Regras inseridas via JavaScript -->
                </ul>
            </div>

            <!-- Bot√£o de Envio -->
            <div class="pt-4">
                <button type="submit"
                        class="w-full py-5 bg-gradient-to-r from-[#d19563] to-[#1d244a] text-white font-extrabold text-2xl rounded-2xl hover:from-[#c3834a] hover:to-[#0f1530] transition duration-300 transform hover:scale-[1.02] shadow-2xl focus:outline-none focus:ring-4 focus:ring-[#d19563aa] flex items-center justify-center">
                    <span class="mr-3 text-3xl">üöÄ</span>
                    Registrar meu palpite na RB Campinas!
                </button>
            </div>
            
            <p class="text-xs text-center text-gray-500 pt-2">
                Ao participar, voc√™ concorda com o regulamento da promo√ß√£o e autoriza o uso dos seus dados para contato em caso de premia√ß√£o.
            </p>

        </form>
    </div>

</body>
</html>
